(function(e){function t(t){for(var n,o,r=t[0],a=t[1],l=t[2],h=0,u=[];h<r.length;h++)o=r[h],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&u.push(i[o][0]),i[o]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);d&&d(t);while(u.length)u.shift()();return c.push.apply(c,l||[]),s()}function s(){for(var e,t=0;t<c.length;t++){for(var s=c[t],n=!0,r=1;r<s.length;r++){var a=s[r];0!==i[a]&&(n=!1)}n&&(c.splice(t--,1),e=o(o.s=s[0]))}return e}var n={},i={app:0},c=[];function o(t){if(n[t])return n[t].exports;var s=n[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=n,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(s,n,function(t){return e[t]}.bind(null,n));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/child/easePageCreator/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],a=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var d=a;c.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("cd49")},"3afb":function(e,t,s){"use strict";s("ac66")},"3d64":function(e,t,s){"use strict";s("c61a")},4098:function(e){e.exports=JSON.parse('{"key":"kuLlthRrI","widget":"grid","hidden":false,"tssss":{},"option":{"gutter":0,"align":"top","justify":"start"},"label":{"width":80,"position":"right","colon":false},"container":true,"children":[{"span":24,"list":[{"key":"kB1mKTnek","widget":"radio","hidden":false,"option":{"type":"static","dict":{"type":"api","dict":"","dictAPI":"","api":""},"direction":"horizontal","url":"","adapter":"return data","data":[{"key":"show","value":"show"},{"key":"show2","value":"show2"},{"key":"unknow","value":"unknow"}],"dynamicData":[]},"name":"kB1mKTnek","type":"string","label":"显隐","description":"","help":"","disabled":false,"rules":[{"required":false,"message":"必填","type":"string","trigger":"change"}],"placeholder":"请选择"},{"key":"kASJAJwRB","widget":"input","hidden":true,"option":{"password":false,"prefix":"","suffix":""},"name":"测试输入框1","type":"string","label":"输入框","description":"","help":"","disabled":false,"rules":[{"required":false,"message":"必填","type":"string","trigger":"blur"}],"placeholder":"请输入","default":""},{"key":"kASJAJwR4","widget":"input","hidden":true,"option":{"password":false,"prefix":"","suffix":""},"name":"测试输入框2","type":"string","label":"输入框","description":"","help":"","disabled":false,"rules":[{"required":false,"message":"必填","type":"string","trigger":"blur"}],"placeholder":"请输入","default":""},{"key":"kI4g2SDED","widget":"button","hidden":false,"option":{"text":"提交","type":"primary","icon":"","long":false,"ghost":false,"shape":"square","script":""},"disabled":false}]}],"title":"测试","description":"","size":"default","logics":[{"type":"value","key":"kB1mKTnek","action":"=","value":"show","effects":[{"key":"kASJAJwRB","properties":[{"key":"hidden","value":false},{"key":"disabled","value":false}]}],"trigger":"prop","script":"","relation":"or"},{"type":"value","key":"kASJAJwRB","action":"=","value":"1","relation":"or","trigger":"prop","script":"","effects":[{"key":"kI4g2SDED","properties":[{"key":"hidden","value":true},{"key":"disabled","value":false}]}]}],"style":{"margin-right":"auto","margin-left":"auto","background":[],"container":{"background-color":"","background":[]},"background-color":"","background-image":"","background-size":"","background-repeat":"","background-position":""},"store":{"dicts":[],"apis":[]}}')},"47f4":function(e,t,s){"use strict";s("928e")},5634:function(e,t,s){"use strict";s("f7bb")},"606b":function(e,t,s){"use strict";s("8f92")},"62a1":function(e,t,s){"use strict";s("d751")},"62d9":function(e,t,s){},"77b9":function(e,t,s){"use strict";s("62d9")},8345:function(e,t,s){"use strict";s("ea15")},"83f4":function(e,t,s){window.__MICRO_APP_ENVIRONMENT__&&(s.p=window.__MICRO_APP_PUBLIC_PATH__)},8545:function(e,t,s){},"8f92":function(e,t,s){},"928e":function(e,t,s){},ac66:function(e,t,s){},be23:function(e,t,s){"use strict";s("8545")},c61a:function(e,t,s){},cd49:function(e,t,s){"use strict";s.r(t);var n={};s.r(n),s.d(n,"getRootSchemaChildren",(function(){return D})),s.d(n,"getParentListByKey",(function(){return J})),s.d(n,"flattenSchema",(function(){return P})),s.d(n,"setKeyAndName",(function(){return W})),s.d(n,"getSchema",(function(){return T})),s.d(n,"getSchemaType",(function(){return I})),s.d(n,"usePlugins",(function(){return x})),s.d(n,"randomStr",(function(){return E})),s.d(n,"isPlainObject",(function(){return _})),s.d(n,"isFunction",(function(){return y})),s.d(n,"isString",(function(){return v})),s.d(n,"isNumber",(function(){return w})),s.d(n,"isArray",(function(){return S})),s.d(n,"jsonClone",(function(){return k})),s.d(n,"isNotEmptyString",(function(){return A})),s.d(n,"include",(function(){return $}));var i={};s.r(i),s.d(i,"defaultSchema",(function(){return N})),s.d(i,"modes",(function(){return M})),s.d(i,"defaultProps",(function(){return G}));var c={};s.r(c),s.d(c,"StringRule",(function(){return Y})),s.d(c,"NumberRule",(function(){return q})),s.d(c,"EmailRule",(function(){return Z})),s.d(c,"URLRule",(function(){return X})),s.d(c,"PatternRule",(function(){return ee})),s.d(c,"JSONRule",(function(){return te}));var o={};s.r(o),s.d(o,"BaseSchema",(function(){return K})),s.d(o,"RootSchema",(function(){return F})),s.d(o,"base",(function(){return Oe}));var r={};s.r(r),s.d(r,"SyncHook",(function(){return ye})),s.d(r,"SyncWaterfallHook",(function(){return fe}));var a={};s.r(a),s.d(a,"VueRender",(function(){return ve}));var l={};s.r(l),s.d(l,"SettingForm",(function(){return as})),s.d(l,"settingExtend",(function(){return ls}));s("83f4");var d=s("7a8b");function h(e,t){const s=Object(d["S"])("router-view");return Object(d["J"])(),Object(d["k"])(s)}s("62a1");var u=s("b3f2"),b=s.n(u);const m={},p=b()(m,[["render",h]]);var g=p,O=s("74f9");const j={class:"epc-page-create",id:"lowcode_edit",ref:"lowcode_edit"};function f(e,t,s,n,i,c){return Object(d["J"])(),Object(d["m"])("div",j,null,512)}function y(e){return"function"===typeof e}function v(e){return"string"===typeof e}function w(e){return"number"===typeof e}function S(e){return Array.isArray(e)}function k(e){return JSON.parse(JSON.stringify(e))}function $(e,t){return-1!==e.indexOf(t)}function E(e=8){let t="";const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(var n=0;n<e;n++)t+=s.charAt(Math.floor(Math.random()*s.length));return"k"+t}function _(e){if(!e||"object"!==typeof e||"[object Object]"!=={}.toString.call(e))return!1;const t=Object.getPrototypeOf(e);if(null===t)return!0;const s=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"===typeof s}function A(e){return!(!v(e)||!e.trim().length)}class R{constructor(e){this.types={string:()=>"",boolean:()=>!1,number:()=>0,array:()=>[],object:()=>({}),null:()=>null,date:()=>new Date,json:()=>"{}","array<date>":()=>[],"array<string>":()=>[],"array<number>":()=>[],"array<boolean>":()=>[]},this.add(e),this.convert={}}add(e){if(_(e))for(const t in e){const s=e[t];!(t in this.types)&&y(s)&&(this.types[t]=s)}}}function D(e){const t=[];if(!e||!e.container)return t;S(e.children)||(e.children=[]);const s=e.children[0];return s?(S(s.list)||(s.list=[]),s.list):t}function T(e,t={}){if(!e)return{};const{store:s,...n}=e;let i={dicts:[],apis:[]};i.dicts=C(t.dicts),i.apis=C(t.apis),i=k(i);const c=k(n);function o(e){const t=e.option||{};for(const s in t)"dynamicData"===s&&(t[s]=[]),"columns"===s&&S(t[s])&&t[s].forEach(e=>delete e.__id);e.container&&S(e.children)&&e.children.forEach(e=>{S(e.list)&&e.list.forEach(e=>o(e))})}return c.store=i,o(c),c}function C(e=[]){return e.map(e=>{const{source:t,data:s,response:n,...i}=e;return Object.assign(i,{source:[],data:[],response:{header:[]}})})}function J(e,t){const s=t;let n=null;function i(e,t){if(t.container){const{children:s}=t;for(let t=0;t<s.length;t++){const c=s[t];for(let t=0;t<c.list.length;t++){const s=c.list[t];if(e===s.key){n=c.list;break}i(e,s)}if(n)break}}}if(e&&i(e,s),!n){const{children:e}=s;S(e)&&e[0]&&S(e[0].list)&&(n=e[0].list)}return n}function P(e){const t={};e&&e.key&&(t[e.key]=e);const s=(e,t)=>{const{dynamic:n,list:i,container:c,children:o}=e||{};n&&S(i)&&i.forEach(e=>s(e,t)),c&&S(o)&&o.forEach(e=>{const n=e.list||[];n.forEach(e=>{const{key:n}=e;A(n)&&void 0===t[n]&&(t[n]=e,s(e,t))})})};return s(e,t),t}function W(e,t,s,n={}){if(A(e.key)?(t&&(e.key=E()),e.name||(e.name=e.key)):(e.key=E(),e.name||(e.name=e.key)),t&&!s){const t=Object.keys(n).map(e=>n[e].name).filter(e=>e);$(t,e.name)&&(e.name=e.key)}}function I(e,t){const s=t&&t.type?t.type:null,n=e&&A(e.type)?e.type:null;let i="string";return S(s)&&s.length?i=$(s,n)?n:s[0]:A(s)&&(i=s),i}function x(e,t){if(!e||!S(t))return;const s=e._installedPlugins;t.forEach(t=>{S(s)&&$(s,t)||e.use(t)})}R.convert={string2number:e=>{const t=parseFloat(e);return isNaN(t)?null:t},string2boolean:e=>!!e,number2string:e=>{const t=String(e);return"[object Object]"===t?null:t},number2boolean:e=>!!e,boolean2string:e=>String(e),boolean2number:e=>Number(e),string2json:e=>{try{return JSON.parse(e)}catch(t){return null}}},R.resolve=function(e,t){const s=e.match(/<(\w+)>/);return t?e.split("<")[0]:s?s[1].toLowerCase():e.toLowerCase()};const L={},U=["$TAB_UPDATE","$WIDGETS_SET","$ROOT_SCHEMA_SET","$ROOT_SCHEMA_FLAT","$MODEL_SET","$MODE_CHANGE","$LOGIC_ADD","$LOGIC_UPDATE","$LOGIC_DELETE","$RULE_INIT","$RULE_TYPE_UPDATE","$RULE_REQUIRED_RULE_UPDATE","$RULE_MESSAGE_UPDATE","$RULE_ADD","$RULE_REMOVE","$STORE_DICT_SELECT","$STORE_DICT_UPDATE","$STORE_DICT_ADD","$STORE_DICT_DELETE","$STORE_DICT_COPY","$STORE_API_SELECT","$STORE_API_UPDATE","$STORE_API_ADD","$STORE_API_DELETE","$STORE_API_COPY","$WIDGET_DEFAULT_PROPS_UPDATE","$WIDGET_UPDATE_BY_VALUE_LOGIC","$WIDGET_UPDATE_BY_EVENT_LOGIC","$WIDGET_ADD","$WIDGET_REMOVE","$WIDGET_DYNAMIC_ADD","$WIDGET_DYNAMIC_REMOVE","$WIDGET_COPY","$WIDGET_TYPE_UPDATE","$WIDGET_OPTION_UPDATE","$WIDGET_DEFAULT_UPDATE","$WIDGET_SELECT","$WIDGET_DESELECT","$WIDGET_CHILD_ADD","$WIDGET_CHILD_REMOVE","$WIDGET_CHILD_MOVE","$STYLE_UPDATE"];U.forEach(e=>{L[e]=e});var V=L;const M=()=>["edit","display"],G=()=>["hidden","disabled"];var N=()=>({key:"",type:"object",widget:""});const z=["list"];class K{constructor(e){const{schema:t}=e||{};this.key=E(),this.widget="",this.hidden=!1,this.option={},this.style={},this.create(e),this.widget||(this.widget=new.target?new.target.widget:t?t.widget:"")}create(e){const{schema:t,clone:s}=e||{};if(_(t)){for(const e in t){if($(z,e)||!(e in this))continue;let s=t[e];S(s)?s=k(s):_(s)&&(s=_(this[e])?k({...this[e],...s}):k(s)),this[e]=s}!s&&this.key||(this.key=E())}}}const H=()=>[{span:12,list:[]},{span:12,list:[]}];class B extends K{constructor(e){super(),this.label="布局",this.container=!0,this.children=H(),this.option={gutter:0,align:"top",justify:"start"},this.create(e),this.createChildren(e)}createChildren(e){let{schema:t,widgets:s={},clone:n,dynamic:i}=e||{};if(_(t)&&A(t.widget)){t=k(t);const e=S(t.children)?t.children:[];e.length||e.push(H()),e.forEach(e=>{(!w(e.span)||e.span<0)&&(e.span=12);const t=[];S(e.list)&&e.list.forEach(e=>{const c=s[e.widget];if(c&&y(c.Schema)){const o=new c.Schema({schema:e,widgets:s,clone:n,dynamic:i});t.push(o)}}),e.list=t}),this.children=e}}}Object.assign(B,{title:"栅格",widget:"grid",preview:"",logic:{value:[],event:[]}});class F extends B{constructor(e){super(),this.title="",this.description="",this.size="default",this.container=!0,this.children=[{span:24,list:[]}],this.logics=[],this.label={width:80,position:"right",colon:!1},this.store={dicts:[]},this.style={"margin-right":"auto","margin-left":"auto",background:[],container:{"background-color":"",background:[]}},this.create(e),this.createChildren(e)}}class Q{constructor(e){this.schema=e,this.rules=this.recursiveResolve(this.schema)}recursiveResolve(e){let t={};const s=(e,t)=>{const{key:n,container:i,children:c,dynamic:o,list:r}=e;return o&&S(r)&&r.forEach(e=>s(e,t)),i&&S(c)?c.forEach(e=>{S(e.list)&&e.list.forEach(e=>s(e,t))}):n in t||n&&(t[n]=this.resolve(e)),t};return t=s(e,t),t}resolve(e){const t=e.rules||[],s=[],n=t.length;for(let i=0;i<n;i++)if(0===i)s.push(t[0]);else{const e=Q.rules[t[i].type];y(e)&&s.push(new e(t[i]).rule)}return s}static set(e){if(e){const t={};Object.keys(e).forEach(s=>{const n=e[s].type;n in t||(t[n]=e[s])}),Q.rules?Object.assign(Q.rules,t):Q.rules=t}}}Q.rules={};class Y{static get type(){return"string"}static get name(){return"字符串"}constructor(e={}){const t={type:"string",message:"字符串不符合规则"};this.origin=Object.assign({},t,e),this.rule={type:"string",trigger:"blur",message:""},this.update(this.origin)}update(e){if(e){const{min:t,max:s}=e,n=parseInt(t),i=parseInt(s);this.rule.message=e.message,isNaN(n)?delete this.rule.min:this.rule.min=n,isNaN(i)?delete this.rule.max:this.rule.max=i}}}class q{static get type(){return"number"}static get name(){return"数字"}constructor(e={}){const t={type:"number",trigger:"blur",message:"数字不正确"};this.origin=Object.assign({},t,e),this.rule={type:"number",trigger:"blur",message:""},this.update(this.origin)}update(e){if(e){this.rule.message=e.message;const{min:t,max:s}=e,n=parseFloat(t),i=parseFloat(s);isNaN(n)?delete this.rule.min:this.rule.min=n,isNaN(i)?delete this.rule.max:this.rule.max=i}}}class Z{static get type(){return"email"}static get name(){return"邮箱"}constructor(e={}){const t={type:"email",message:"邮箱格式不正确"};this.origin=Object.assign({},t,e),this.rule={type:"email",trigger:"blur",message:""},this.update(this.origin)}update(e){e&&(this.rule.message=e.message,Object.assign(this.origin,e))}}class X{static get type(){return"url"}static get name(){return"网址"}constructor(e={}){const t={type:"url",message:"非法URL"};this.origin=Object.assign({},t,e),this.rule={type:"url",trigger:"blur",message:""},this.update(this.origin)}update(e){e&&(this.rule.message=e.message,Object.assign(this.origin,e))}}class ee{static get type(){return"pattern"}static get name(){return"正则表达式"}constructor(e={}){const t={type:"pattern",pattern:"",message:"",ignoreCase:!1,global:!1,multiline:!1};this.origin=Object.assign({},t,e),this.rule={type:"pattern",trigger:"blur",pattern:new RegExp,message:""},this.update(this.origin)}update(e){if(e){const{pattern:s,ignoreCase:n,global:i,multiline:c}=e;this.rule.message=e.message;const o=[n?"i":"",i?"g":"",c?"m":""].join("");let r=new RegExp;if("string"===typeof s&&s.length)try{r=new RegExp(e.pattern,o)}catch(t){}this.rule.pattern=r}}}class te{static get type(){return"json"}static get name(){return"JSON"}constructor(e={}){const t={type:"string",message:"非法的json格式!"};this.origin=Object.assign({},t,e),this.rule={type:"string",trigger:"blur",validator:function(e,t,s){if(!t||!(t+"").trim())return s();try{JSON.parse(t),s()}catch(n){return s(new Error(e.message))}},message:"非法的json格式!"},this.update(this.origin)}update(e){e&&(this.rule.message=e.message,Object.assign(this.origin,e))}}Q.set(c);var se=Q,ne={[V.$ROOT_SCHEMA_FLAT](e,{rootSchema:t}){e.rootSchema=t,e.flatSchemas=P(t)},[V.$ROOT_SCHEMA_SET](e,{rootSchema:t}){const{flatWidgets:s}=this.getters,n=new F({schema:t,widgets:s});e.rootSchema=Object.assign({},e.rootSchema,n),this.commit(V.$ROOT_SCHEMA_FLAT,{rootSchema:e.rootSchema})}},ie={[V.$WIDGETS_SET](e,{widgets:t}){e.widgets=t},[V.$WIDGET_SELECT](e,{key:t}){const s=e.flatSchemas[t],n=e.selectedSchema.key===t;"design"===e.tab&&!n&&s&&(e.selectedSchema=s)},[V.$WIDGET_ADD](e,{widget:t,schema:s}){const{selectedSchema:n,rootSchema:i,flatSchemas:c}=e,{flatWidgets:o,isSelected:r}=this.getters,a=t||s.widget,l=o[a].Schema;let d=[];const h=!t&&s?{clone:!0,schema:s,flatSchemas:c}:{},u=new l({widgets:o,...h});d=D(i),d.push(u),this.commit(V.$ROOT_SCHEMA_FLAT,{rootSchema:Object.assign({},i)}),e.selectedSchema=u}},ce={schema:ne,widget:ie};const oe=new F,re=N();class ae{constructor(e){const{Rule:t}=e||{};return{state:{tab:"",mode:"edit",selectedSchema:re,rootSchema:oe,model:{},widgets:[],flatSchemas:{},flatRules:{},defaults:{},store:{baseURL:"",current:{type:"",dict:{index:-1,value:{}},api:{index:-1,value:{}}},dicts:[],apis:[]}},getters:{isSelected:e=>!!e.selectedSchema.key,flatWidgets:({widgets:e})=>{const t={};return S(e)?(e.forEach(e=>{S(e.widgets)&&e.widgets.forEach(e=>{"function"===typeof e.Schema&&(t[e.Schema.widget]=e)})}),t):t},settingWidget:(e,t)=>{const{widget:s,key:n}=e.selectedSchema,i=t.flatWidgets[s]||null;return n&&i&&i.Setting?S(i.Setting)?[...i.Setting]:{...i.Setting}:null},widgetsValidators:(e,{flatWidgets:s})=>{const n={};for(const i in s){const{Schema:e}=s[i];y(e)&&S(e.validators)&&(n[i]=[],e.validators.forEach(e=>{const s=t.rules[e];s&&n[i].push(s)}))}return n}},mutations:{[V.$TAB_UPDATE](e,{tab:t}){t&&"string"===typeof t&&(e.tab=t)},[V.$MODE_CHANGE](e,{mode:t}){e.mode=t},...ce.model,...ce.schema,...ce.widget,...ce.rule,...ce.logic,...ce.store,...ce.style},actions:{},modules:{}}}}var le=s("767c");class de{constructor(e={}){this.$$store={},this.$$types=Object.assign({},V),this.$$init(e)}$$init(e){this.$$store=new le["b"].Store(new ae({Rule:e.Rule||se}))}initWidgets(e){S(e)&&this.$$store.commit(this.$$types.$WIDGETS_SET,{widgets:e})}getSchema(){const{rootSchema:e,store:t}=this.$$store.state;return T(e,t)}getRootSchema(){return this.$$store.state.rootSchema}initRootSchema(e){this.$$store.commit(this.$$types.$ROOT_SCHEMA_SET,{rootSchema:e})}getFlatWidgets(){return this.$$store.getters.flatWidgets}getTab(){return this.$$store.state.tab}updateTab(e){A(e)&&this.$$store.commit(this.$$types.$TAB_UPDATE,{tab:e})}getSettingWidget(){return this.$$store.getters.settingWidget}isSelected(){return this.$$store.getters.isSelected}getState(){return this.$$store.state}selectWidget(e){A(e)&&this.$$store.commit(this.$$types.$WIDGET_SELECT,{key:e})}getSelectedSchema(){return this.$$store.state.selectedSchema}getModel(e){return e?"string"===typeof e?this.$$store.state.model[e]:void 0:this.$$store.state.model}updateModel(e={},t=!1){this.$$store.commit(this.$$types.$MODEL_SET,{model:e,useName:t})}copyWidget(e){A(e)&&this.$$store.commit(this.$$types.$WIDGET_COPY,{key:e})}getWidgets(){return this.$$store.state.widgets}addWidget(e){if(A(e))this.$$store.commit(this.$$types.$WIDGET_ADD,{widget:e,schema:null});else{if(!_(e)||!A(e.widget))return;this.$$store.commit(this.$$types.$WIDGET_ADD,{widget:null,schema:e})}}getFlatSchemas(){return this.$$store.state.flatSchemas}}var he=B;class ue extends K{constructor(e){const{schema:t,widgets:s={}}=e||{};super(),this.name="",this.type=I(t,new.target),this.label="",this.description="",this.help="",this.disabled=!1,this.rules=[{required:!1,message:"必填",type:"string",trigger:"blur"}],this.create(e),s[this.widget]&&(void 0)(this,s[this.widget].Schema)}create(e){const{clone:t,dynamic:s,flatSchemas:n}=e||{};K.prototype.create.call(this,e),W(this,t,s,n)}updateRequiredRule(e,t){(void 0)(this,t,e)}}class be extends ue{constructor(e){super(),this.label="输入框",this.placeholder="请输入",this.default="",this.option={password:!1,prefix:"",suffix:""},this.create(e)}}Object.assign(be,{title:"单行文本",widget:"input",preview:"",type:"string",validators:["string","email","url","pattern"],logic:{value:["=","!=","<>","><"],event:["change"]}});var me=be;class pe extends ue{constructor(e){super(),this.type="string",this.label="单选框",this.placeholder="请选择",this.default="",this.option={type:"static",dict:{type:"dict",dict:"",dictAPI:"",api:""},direction:"horizontal",url:"",adapter:"return data",data:[{key:"A",value:"A"}],dynamicData:[]},this.create(e)}}Object.assign(pe,{title:"单选框",widget:"radio",preview:"",type:["string","number"],validators:[],logic:{value:["=","!="],event:["change"]}});var ge=pe,Oe={grid:he,input:me,radio:ge};class je{constructor(){this.tasks=[]}tap(e){"function"===typeof e&&this.tasks.push(e)}}class fe extends je{constructor(){super(),this.tasks=[]}call(e){const[t,...s]=this.tasks;return"function"!==typeof t?e:s.reduce((e,t)=>t(e),t(e))}}class ye extends je{constructor(){super(),this.tasks=[]}call(...e){this.tasks.forEach(t=>t(...e))}}class ve{constructor(e){const{el:t,store:s,widgets:n=[],mode:i,schema:c,component:o,Rule:r,callPlugin:a}=e;this.el=t,this.mode=i||"edit",this.$$origin=null,this.store=null,this.component=o||null,this.callPlugin=a||(()=>0),x(d["default"],[le["b"]]),this.callPlugin("render","init",{Vue:d["default"],ctx:this}),s?(this.store=s,this.$$origin=this.render(),this.callPlugin("render","created",{ctx:this})):(this.store=new de({Rule:r||se}),S(n)&&(this.store.initWidgets(n),_(c)&&this.store.initRootSchema(c),this.$$origin=this.render(),this.callPlugin("render","created",{ctx:this}))),this.on=o.on,this.off=o.off}render(e={}){const{el:t,store:s,mode:n,component:i}=this,c={store:s,$render:this,mode:e.mode||n},o=document.createElement("div");t.appendChild(o),this.callPlugin("render","beforeCreate",{ctx:this});const r=Object(d["j"])({extension:c,el:o,render:()=>Object(d["t"])(i)});return r.mount(o),r}destroy(){if(this.$$origin){if(this.$$origin.unmount(),!this.el.contains(this.$$origin.$el))return;this.el.removeChild(this.$$origin.$el)}}}const we=e=>(Object(d["M"])("data-v-7b052266"),e=e(),Object(d["K"])(),e),Se={class:"epc-editor-container epc-layout"},ke={class:"epc-layout-body"},$e={key:1,class:"epc-layout-left"},Ee={class:"epc-layout-main epc-workspace"},_e={class:"epc-workspace-design"},Ae={ref:"design-pc"},Re={ref:"design-h5"},De={key:1,class:"epc-layout-right"},Te=Object(d["o"])("PC"),Ce=Object(d["o"])("H5"),Je={ref:"preview-pc"},Pe={ref:"preview-h5"},We=we(()=>Object(d["n"])("span",null,"Schema",-1)),Ie=Object(d["o"])(" 待完善schema预览 ");function xe(e,t,s,n,i,c){const o=Object(d["S"])("EpcHeader"),r=Object(d["S"])("EpcTool"),a=Object(d["S"])("EpcSetting"),l=Object(d["S"])("RadioButton"),h=Object(d["S"])("RadioGroup"),u=Object(d["S"])("epc-fullscreen");return Object(d["J"])(),Object(d["m"])("div",Se,[Object(d["p"])(o,{header:e.panels.header,store:e.store,"design-view":e.design,ready:e.ready,onPreview:e.onPreview},null,8,["header","store","design-view","ready","onPreview"]),Object(d["n"])("div",ke,[e.panels.tool?(Object(d["J"])(),Object(d["m"])(d["b"],{key:0},[e.panels.tool.render?(Object(d["J"])(),Object(d["m"])("div",{key:0,class:"epc-layout-left",ref:"tool",style:Object(d["A"])((e.panels.tool||{}).style||"")},null,4)):(Object(d["J"])(),Object(d["m"])("div",$e,[Object(d["p"])(r,{widgets:e.widgets,onOnAdd:e.onAddWidget},null,8,["widgets","onOnAdd"])]))],64)):Object(d["l"])("",!0),Object(d["n"])("div",Ee,[Object(d["n"])("div",_e,[Object(d["n"])("div",Ae,null,512),Object(d["n"])("div",Re,null,512)])]),e.panels.setting?(Object(d["J"])(),Object(d["m"])("div",De,[e.panels.setting.render?(Object(d["J"])(),Object(d["m"])("div",{key:0,class:"epc-setting-box",ref:"setting",style:Object(d["A"])((e.panels.setting||{}).style||"")},null,4)):(Object(d["J"])(),Object(d["m"])("div",{key:1,class:"epc-setting-box",style:Object(d["A"])((e.panels.setting||{}).style||"")},[Object(d["p"])(a,{store:e.store,settings:e.settings},null,8,["store","settings"])],4))])):Object(d["l"])("",!0)]),Object(d["p"])(u,{visible:!!e.preview.view,onOnClose:e.closePreview},{header:Object(d["eb"])(()=>[Object(d["p"])(h,{modelValue:e.preview.view,"onUpdate:modelValue":t[0]||(t[0]=t=>e.preview.view=t),"button-style":"solid"},{default:Object(d["eb"])(()=>[Object(d["p"])(l,{label:"pc"},{default:Object(d["eb"])(()=>[Te]),_:1}),Object(d["p"])(l,{label:"h5",disabled:""},{default:Object(d["eb"])(()=>[Ce]),_:1})]),_:1},8,["modelValue"])]),default:Object(d["eb"])(()=>[Object(d["fb"])(Object(d["n"])("div",Je,null,512),[[d["bb"],"pc"===e.preview.view]]),Object(d["fb"])(Object(d["n"])("div",Pe,null,512),[[d["bb"],"h5"===e.preview.view]])]),_:1},8,["visible","onOnClose"]),Object(d["p"])(u,{visible:!!e.schemaPanel.visible},{header:Object(d["eb"])(()=>[We]),default:Object(d["eb"])(()=>[Ie]),_:1},8,["visible"])])}const Le={class:"draw-btn"};function Ue(e,t,s,n,i,c){const o=Object(d["S"])("AppstoreOutlined"),r=Object(d["S"])("TabPane"),a=Object(d["S"])("Tabs"),l=Object(d["S"])("caret-left-outlined");return Object(d["J"])(),Object(d["m"])(d["b"],null,[Object(d["p"])(a,{activeKey:e.activeKey,"onUpdate:activeKey":t[1]||(t[1]=t=>e.activeKey=t),"tab-position":"left",onTabScroll:e.callback,class:"epc-toolbar"},{default:Object(d["eb"])(()=>[(Object(d["J"])(!0),Object(d["m"])(d["b"],null,Object(d["Q"])(e.toolData,s=>(Object(d["J"])(),Object(d["k"])(r,{key:s.id},{tab:Object(d["eb"])(()=>[Object(d["p"])(o,{style:{fontSize:"18px",color:"#2468f2"}})]),default:Object(d["eb"])(()=>[(Object(d["J"])(),Object(d["k"])(Object(d["U"])(s.component),{widgets:e.widgets,onOnAdd:t[0]||(t[0]=t=>{e.$emit("on-add",t)})},null,40,["widgets"]))]),_:2},1024))),128))]),_:1},8,["activeKey","onTabScroll"]),Object(d["n"])("div",Le,[Object(d["p"])(l,{onClick:e.switchBar},null,8,["onClick"])])],64)}var Ve=s("7e99"),Me=s("e46d"),Ge=s("3ff6"),Ne=s("25c6"),ze=s("08a1"),Ke=s("755f"),He=s("dc56");const Be=e=>(Object(d["M"])("data-v-258a7486"),e=e(),Object(d["K"])(),e),Fe={class:"tools-components"},Qe=Be(()=>Object(d["n"])("h3",null,"组件库",-1)),Ye=["onClick"],qe=Object(d["o"])("自定义组件");function Ze(e,t,s,n,i,c){const o=Object(d["S"])("a-input"),r=Object(d["S"])("ExperimentTwoTone"),a=Object(d["S"])("a-collapse-panel"),l=Object(d["S"])("a-collapse"),h=Object(d["S"])("a-tab-pane"),u=Object(d["S"])("a-tabs");return Object(d["J"])(),Object(d["m"])("div",Fe,[Qe,Object(d["p"])(o,{placeholder:"搜索组件"}),Object(d["p"])(u,{activeKey:e.activeKey,"onUpdate:activeKey":t[1]||(t[1]=t=>e.activeKey=t)},{default:Object(d["eb"])(()=>[Object(d["p"])(h,{key:"1",tab:"系统组件","force-render":""},{default:Object(d["eb"])(()=>[Object(d["p"])(l,{activeKey:e.collapseActiveKey,"onUpdate:activeKey":t[0]||(t[0]=t=>e.collapseActiveKey=t),ghost:"","expand-icon-position":"right"},{default:Object(d["eb"])(()=>[(Object(d["J"])(!0),Object(d["m"])(d["b"],null,Object(d["Q"])(e.widgets,(t,s)=>(Object(d["J"])(),Object(d["k"])(a,{header:t.title,key:s},{default:Object(d["eb"])(()=>[(Object(d["J"])(!0),Object(d["m"])(d["b"],null,Object(d["Q"])(t.widgets,(t,s)=>(Object(d["J"])(),Object(d["m"])("div",{key:s,class:"epc-widgets-single-item",onClick:s=>e.addWidget(t)},[Object(d["p"])(r),Object(d["o"])(" "+Object(d["W"])(t.Schema.title),1)],8,Ye))),128))]),_:2},1032,["header"]))),128))]),_:1},8,["activeKey"])]),_:1}),Object(d["p"])(h,{key:"2",tab:"自定义组件"},{default:Object(d["eb"])(()=>[qe]),_:1})]),_:1},8,["activeKey"])])}var Xe=s("7769"),et=s("eec2"),tt=Object(d["r"])({components:{ATabs:Ge["a"],ATabPane:Ne["a"],ACollapse:Ve["a"],ACollapsePanel:Me["a"],AInput:Xe["a"],ExperimentTwoTone:et["a"]},props:{widgets:{type:Array,default:()=>[]}},data(){return{activeKey:"1",collapseActiveKey:1}},methods:{addWidget(e){e&&this.$emit("on-add",e.Schema.widget)}}});s("77b9");const st=b()(tt,[["render",Ze],["__scopeId","data-v-258a7486"]]);var nt=st,it=Object(d["r"])({components:{Collapse:Ve["a"],CollapsePanel:Me["a"],SmileTwoTone:ze["a"],Tabs:Ge["a"],TabPane:Ne["a"],CaretLeftOutlined:Ke["a"],AppstoreOutlined:He["a"]},emits:["on-add"],props:{widgets:{type:Array,default:()=>[]}},data(){return{toolData:[{id:"components",label:"组件",component:Object(d["w"])(nt)},{id:"outline",label:"文档树",component:""},{id:"code",label:"代码",component:""}],activeKey:"components"}},methods:{switchBar(){},callback(){}},mounted(){}});s("3d64");const ct=b()(it,[["render",Ue],["__scopeId","data-v-0d8d10c6"]]);var ot=ct;function rt(e,t,s,n,i,c){const o=Object(d["S"])("TabPane"),r=Object(d["S"])("Tabs");return Object(d["J"])(),Object(d["k"])(r,{activeKey:e.activeKey,"onUpdate:activeKey":t[0]||(t[0]=t=>e.activeKey=t),onClick:e.show},{default:Object(d["eb"])(()=>[(Object(d["J"])(!0),Object(d["m"])(d["b"],null,Object(d["Q"])(e.widgetSettings,(t,s)=>(Object(d["J"])(),Object(d["k"])(o,{key:s,tab:t.name},{default:Object(d["eb"])(()=>[(Object(d["J"])(),Object(d["k"])(Object(d["U"])(t.component),{store:e.store},null,8,["store"]))]),_:2},1032,["tab"]))),128))]),_:1},8,["activeKey","onClick"])}const at=Object(d["o"])(" 请选择组件哦！ "),lt=Object(d["n"])("small",null,"这里考虑将页面和样式单独抽出来，每个页面都拥有自己的。并提供一个全局的样式和页面setting",-1),dt=[at,lt];function ht(e,t,s,n,i,c){return Object(d["J"])(),Object(d["m"])("div",null,dt)}var ut=Object(d["r"])({});const bt=b()(ut,[["render",ht]]);var mt=bt;const{isArray:pt,isFunction:gt,isPlainObject:Ot,isString:jt}=n,ft=[{key:"style",name:"样式",framework:"vue",component:Object(d["w"])(mt)},{key:"global",name:"页面",framework:"vue"}];var yt=Object(d["r"])({components:{Tabs:Object(d["w"])(Ge["a"]),TabPane:Object(d["w"])(Ne["a"])},props:{settings:{type:Array,default:()=>[]},store:{type:Object,default:()=>({types:{},state:{}})}},data(){return{activeKey:0,markRaw:d["w"],filterSettings:[],defaultSettings:[...ft]}},computed:{widgetSettings(){return this.isSelected?this.filterSettings:this.defaultSettings},settingWidget(){return this.store.getSettingWidget()},isSelected(){return this.store.isSelected()},selectedSchema(){return this.store.getSelectedSchema()}},watch:{selectedSchema(){this.selectedSettings()}},mounted(){this.selectedSettings()},methods:{selectedSettings(){const e=[...ft],t=[...this.settings];let s=[];pt(this.settingWidget)?s=s.concat(this.settingWidget):gt(this.settingWidget)?s.unshift({key:"prop",name:"属性",component:Object(d["w"])(this.settingWidget)}):Ot(this.settingWidget)&&s.unshift({key:"prop",name:"属性",framework:"vue",component:Object(d["w"])(this.settingWidget)});let n=[];n=[].concat(s,t,e),n=this.unique(n),this.isSelected?this.filterSettings=[...n]:this.defaultSettings=[...n],this.renderSettings()},unique(e=[]){const t={};return e.filter(e=>!(!e||!e.component)&&(!(!e.key||!jt(e.key))&&(!(e.key in t)&&(t[e.key]=!0,!0))))},renderSettings(){this.$nextTick(()=>{const e=this.$refs.settings;!e||e.length<=0||e.length!==this.widgetSettings.length||this.widgetSettings.forEach((t,s)=>{const n=e[s],{component:i}=t;gt(i)&&i({el:n,store:this.store})})})},show(){}}});s("be23");const vt=b()(yt,[["render",rt],["__scopeId","data-v-6bde6bfc"]]);var wt=vt;const St={class:"epc-header-container"},kt=Object(d["o"])("pc"),$t=Object(d["o"])("h5"),Et=Object(d["o"])("预览");function _t(e,t,s,n,i,c){const o=Object(d["S"])("RadioButton"),r=Object(d["S"])("RadioGroup"),a=Object(d["S"])("Button");return Object(d["J"])(),Object(d["m"])("div",St,[e.header.render?(Object(d["J"])(),Object(d["m"])("div",{key:0,class:"epc-header-main",ref:"header",style:Object(d["A"])(e.header.style||"")},null,4)):(Object(d["J"])(),Object(d["m"])("div",{key:1,class:"epc-header-main",style:Object(d["A"])(e.header.style||"")},[e.header.left&&e.header.left.render?(Object(d["J"])(),Object(d["m"])("div",{key:0,class:"epc-main-left",ref:"left",style:Object(d["A"])((e.header.left||{}).style||"")},null,4)):(Object(d["J"])(),Object(d["m"])("div",{key:1,class:"epc-main-left",style:Object(d["A"])((e.header.left||{}).style||"")}," EasePageCreator ",4)),e.header.center&&e.header.center.render?(Object(d["J"])(),Object(d["m"])("div",{key:2,class:"epc-main-center",ref:"center",style:Object(d["A"])((e.header.center||{}).style||"")},null,4)):(Object(d["J"])(),Object(d["m"])("div",{key:3,class:"epc-main-center",style:Object(d["A"])((e.header.center||{}).style||"")},[Object(d["p"])(r,{value:e.test.view,"onUpdate:value":t[0]||(t[0]=t=>e.test.view=t),"button-style":"solid",onChange:e.onChangeView},{default:Object(d["eb"])(()=>[Object(d["p"])(o,{value:"pc"},{default:Object(d["eb"])(()=>[kt]),_:1}),Object(d["p"])(o,{value:"h5"},{default:Object(d["eb"])(()=>[$t]),_:1})]),_:1},8,["value","onChange"])],4)),e.header.right&&e.header.right.render?(Object(d["J"])(),Object(d["m"])("div",{key:4,class:"epc-main-right",ref:"right",style:Object(d["A"])((e.header.right||{}).style||"")},null,4)):(Object(d["J"])(),Object(d["m"])("div",{key:5,class:"epc-main-right",style:Object(d["A"])((e.header.right||{}).style||"")},[Object(d["p"])(a,{class:"epc-main-right-item",size:"small",type:"ghost",onClick:e.onPreview},{default:Object(d["eb"])(()=>[Et]),_:1},8,["onClick"])],4))],4))])}var At=s("5898"),Rt=s("4f42"),Dt=s("1339"),Tt=Object(d["r"])({components:{RadioGroup:At["a"],RadioButton:Rt["a"],Button:Dt["a"]},props:{header:{type:Object,default:()=>({})},store:{type:Object,default:()=>({state:{}})},designView:{type:Object,default:()=>({view:"pc"})},ready:{type:Object,default:()=>({pc:!1,h5:!1})}},setup(e){const{designView:t}=Object(d["Z"])(e);return{test:t}},mounted(){},methods:{renderRef(e,t){if(!e[t]||"function"!==typeof e[t].render)return;const s=this.$refs[t],n={$emit:this.$emit.bind(this)},{store:i}=this;e[t].render({el:s,store:i,ctx:n})},onChangeView(e){this.$emit("change-view",e)},onPreview(){this.$emit("preview")},onShowSchema(){this.$emit("show-schema")},onShowLogic(){this.$emit("show-logic")},onChangeLange(e){this.$emit("change-lang",e)}}});s("47f4");const Ct=b()(Tt,[["render",_t],["__scopeId","data-v-14d31f54"]]);var Jt=Ct;const Pt={class:"ep-fullscreen"},Wt={key:0,class:"ep-fullscreen-header"},It={class:"ep-fullscreen-body"};function xt(e,t,s,n,i,c){const o=Object(d["S"])("CloseCircleOutlined");return Object(d["fb"])((Object(d["J"])(),Object(d["m"])("div",Pt,[e.$slots.header?(Object(d["J"])(),Object(d["m"])("div",Wt,[Object(d["R"])(e.$slots,"header",{},void 0,!0),Object(d["n"])("span",{class:"ep-fullscreen-close",onClick:t[0]||(t[0]=(...e)=>c.onClose&&c.onClose(...e))},[Object(d["p"])(o)])])):Object(d["l"])("",!0),Object(d["n"])("div",It,[Object(d["R"])(e.$slots,"default",{},void 0,!0)])],512)),[[d["bb"],s.visible]])}var Lt=s("0986"),Ut={components:{CloseCircleOutlined:Lt["a"]},props:{visible:{type:Boolean,default:!1}},methods:{onClose(){this.$emit("on-close")}}};s("5634");const Vt=b()(Ut,[["render",xt],["__scopeId","data-v-0f97b96a"]]);var Mt=Vt;const Gt=()=>({left:{},center:{},right:{}}),Nt=()=>({preview:!0,logic:!0,schema:!0,header:Gt(),tool:!0,setting:!0,footer:!1});var zt=Object(d["r"])({components:{EpcHeader:Jt,EpcSetting:wt,EpcTool:ot,EpcFullscreen:Mt,RadioButton:Rt["a"],RadioGroup:At["a"]},data(){return{design:{view:"pc",pc:null,h5:null},preview:{view:"",pc:null,h5:null},panels:Nt(),settings:[],schemaPanel:{visible:!1},logicPanel:{visible:!1},ready:{pc:!1,h5:!1}}},computed:{store(){return this.$root.$options.extension.store},widgets(){return this.store.getWidgets()}},beforeMount(){const e=this.$root.$options.extension||{};Object.assign(this.panels,e.panels),this.settings=e.settings,this.design.view=e.view||"pc",this.setReady()},mounted(){this.renderDesignView(this.design.view),this.store.updateTab("design")},methods:{setReady(){const e=this.$root.$options.extension||{},{pc:t,h5:s}=e,n=t&&t.widgets&&t.Render,i=s&&s.widgets&&s.Render;this.ready.pc=!!n,this.ready.h5=!!i},renderDesignView(e){this.renderView(e,"design")},renderView(e,t){if(!e||!t)return;const s=this.$refs[t+"-"+e],n=this.store.getSchema(),{pc:i,h5:c}=this[t],o=this.$root.$options.extension,{setRender:r,callPlugin:a,Render:l,widgets:d,component:h}=o;this[t].view=e;const u=this.getIns(e);if(!u)return;const b=l||o[e].Render,m=d||o[e].widgets,p=h||o[e].component;if(!b||!m||!m.length||!p)return;const g={el:s,mode:"edit"};"design"===t?(this.store.initWidgets(m),g.store=this.store):(g.schema=n,g.widgets=m),g.component=p,g.callPlugin=a,this[t][e]=new b(g),"design"===t&&r(this.design[e])},getIns(e){const t=this.$root.$options.extension||{};return t[e]},onAddWidget(e){this.store.addWidget(e)},onPreview(){this.renderPreview(this.design.view)},renderPreview(e){this.renderView(e,"preview")},closePreview(){this.preview.view="";const{h5:e,pc:t}=this.preview;this.destoryRender(e),this.destoryRender(t)},destoryRender(e){e&&n.isFunction(e.destroy)&&e.destroy()},changePreview(e){this.renderPreview(e)}}});s("8345");const Kt=b()(zt,[["render",xe],["__scopeId","data-v-7b052266"]]);var Ht=Kt;const{isArray:Bt,isPlainObject:Ft,usePlugins:Qt}=n,Yt=e=>Object.assign({component:null,widgets:[],Render:null},e||{});class qt{constructor(e){this.el=e.el,this.widgets=e.widgets,this.pc=Yt(e.pc),this.h5=Yt(e.h5),this.env=e.env||"production",this.view=e.view||"pc",this.Render=e.Render,this.widgets=e.widgets,this.schema=e.schema,this.component=e.component,this.$hooks={life:{init:new r.SyncHook,beforeCreate:new r.SyncHook,created:new r.SyncHook,beforeDestroy:new r.SyncHook,destroyed:new r.SyncHook},schema:{copy:new r.SyncWaterfallHook},render:{init:new r.SyncHook,beforeCreate:new r.SyncHook,created:new r.SyncHook,beforeDestroy:new r.SyncHook,destroyed:new r.SyncHook}},Qt(d["default"],[le["b"]]),this.callPlugin("life","init",{ctx:this}),this.store=new de({Rule:e.Rule||void 0});const t=this.widgets||this[this.view]&&this[this.view].widgets||[];Bt(t)&&(this.store.initWidgets(t),Ft(this.schema)&&this.store.initRootSchema(this.schema),this.$$origin=this.render(),this.callPlugin("life","created",{ctx:this}))}callPlugin(e,t,...s){if(!this.$hooks[e])return;const n=this.$hooks[e][t];return n?n.call(...s):void 0}setRender(e){this.$render=e}render(){const{el:e,store:t,panels:s,settings:n,env:i,view:c,pc:o,h5:r,Render:a,widgets:l,component:h}=this,u={store:t,panels:s,settings:n,env:i,view:c,pc:o,h5:r,Render:a,widgets:l,component:h,setRender:this.setRender.bind(this),callPlugin:this.callPlugin.bind(this)};this.callPlugin("life","beforeCreate",{ctx:this});const b=Object(d["j"])({extension:u,el:e,render:()=>Object(d["t"])(Ht)}).mount(e);return b}}qt.Store=de;var Zt=qt;function Xt(e,t,s,n,i,c){const o=Object(d["S"])("a-input"),r=Object(d["S"])("a-form-item"),a=Object(d["S"])("a-form"),l=Object(d["S"])("EpWidgetRule");return Object(d["J"])(),Object(d["m"])(d["b"],null,[Object(d["p"])(a,{model:s.store,"label-col":{style:{width:"100px"}},onClick:c.show},{default:Object(d["eb"])(()=>[s.keyList.includes("key")?(Object(d["J"])(),Object(d["k"])(r,{key:0,label:"唯一标识key:"},{default:Object(d["eb"])(()=>[Object(d["p"])(o,{disabled:!0,value:c.selectedSchema.key,"onUpdate:value":t[0]||(t[0]=e=>c.selectedSchema.key=e)},null,8,["value"])]),_:1})):Object(d["l"])("",!0),s.keyList.includes("placeholder")?(Object(d["J"])(),Object(d["k"])(r,{key:1,label:"占位文本:"},{default:Object(d["eb"])(()=>[Object(d["p"])(o,{value:c.selectedSchema.placeholder,"onUpdate:value":t[1]||(t[1]=e=>c.selectedSchema.placeholder=e)},null,8,["value"])]),_:1})):Object(d["l"])("",!0),s.keyList.includes("label")?(Object(d["J"])(),Object(d["k"])(r,{key:2,label:"标题:"},{default:Object(d["eb"])(()=>[Object(d["p"])(o,{value:c.selectedSchema.label,"onUpdate:value":t[2]||(t[2]=e=>c.selectedSchema.label=e)},null,8,["value"])]),_:1})):Object(d["l"])("",!0)]),_:1},8,["model","onClick"]),Object(d["p"])(l)],64)}function es(e,t,s,n,i,c){return Object(d["J"])(),Object(d["m"])("div",null,"rules")}var ts={props:{rule:{type:Object,default:()=>({})},index:{type:Number,default:0}},watch:{"rule.message"(e){this.$emit("on-message-change",{index:this.index,message:e})}}};const ss=b()(ts,[["render",es]]);var ns=ss,is=s("2b0f"),cs=s("1494"),os={components:{EpWidgetRule:ns,AForm:is["a"],AFormItem:cs["a"],AInput:Xe["a"]},props:{orders:{type:Array,default:()=>[{key:"key"},{key:"name"},{key:"label"},{key:"placeholder"},{key:"description"},{key:"help"},{key:"hidden"},{key:"disabled"},{key:"dynamic"},{key:"rule"}]},store:{type:Object,default:()=>({types:{},state:{}})},keyList:{type:Array,default:()=>["key","label"]}},data(){return{}},computed:{selectedSchema(){return this.store.getSelectedSchema()},rules(){return this.store.getSelectedSchema().rules||[]},selectedValidators(){const e=this.store.getWidgetsValidators();return e[this.selectedSchema.widget]||[]}},methods:{show(){},onRuleTypeChange(e,t){const{key:s}=this.selectedSchema;this.store.updateRule(s,t,{type:e})},onRuleMessageChange({index:e,message:t}){const{key:s}=this.selectedSchema;this.store.updateRule(s,e,{message:t})},addRule(){const{key:e}=this.selectedSchema;this.store.addRule(e)},deleteRule(e){const{key:t}=this.selectedSchema;this.store.removeRule(t,e)}}};const rs=b()(os,[["render",Xt]]);var as=rs,ls={components:{SettingForm:as},props:{store:{type:Object,default:()=>({})}},computed:{selectedSchema(){return this.store.getSelectedSchema()}},methods:{event(e,t){this.$emit(e,t)}}};const{defaultSchema:ds}=i;var hs={props:{schema:{type:Object,default:()=>ds()}},computed:{store(){return this.$root.$options.extension.store},rootSchema:{get(){return this.store.getRootSchema()},set(e){this.store.initRootSchema(e)}},mode(){return this.store.getState().mode},model:{get(){return this.store.getModel()},set(e){this.store.updateModel(e)}}},methods:{event(e,...t){this.$emit("on-event",this.schema.key,e,...t)}}};const us={class:"epc-main-render"},bs={class:"vue-drag",ref:"vuedrag"};function ms(e,t,s,n,i,c){const o=Object(d["S"])("EpcWidgetItem");return Object(d["J"])(),Object(d["m"])("div",us,[Object(d["n"])("div",bs,["design"!==e.state.tab?(Object(d["J"])(!0),Object(d["m"])(d["b"],{key:0},Object(d["Q"])(e.childrenSchema,t=>(Object(d["J"])(),Object(d["k"])(o,{key:t.key,schema:t,"flat-widgets":e.flatWidgets,"flat-schemas":e.flatSchemas,"root-schema":e.rootSchema,onOnAdd:e.onWidgetAdd,onOnEvent:e.onEvent,onOnDynamicAdd:e.onDynamicAdd,onOnDynamicRemove:e.onDynamicRemove},null,8,["schema","flat-widgets","flat-schemas","root-schema","onOnAdd","onOnEvent","onOnDynamicAdd","onOnDynamicRemove"]))),128)):(Object(d["J"])(!0),Object(d["m"])(d["b"],{key:1},Object(d["Q"])(e.childrenSchema,t=>(Object(d["J"])(),Object(d["k"])(o,{key:t.key,schema:t,"flat-widgets":e.flatWidgets,"flat-schemas":e.flatSchemas,"selected-schema":e.selectedSchema,"root-schema":e.rootSchema,onOnSelect:e.onWidgetSelect,onOnDelete:e.onWidgetDelete,onOnCopy:e.onWidgetCopy,onOnAdd:e.onWidgetAdd,onOnEvent:e.onEvent},null,8,["schema","flat-widgets","flat-schemas","selected-schema","root-schema","onOnSelect","onOnDelete","onOnCopy","onOnAdd","onOnEvent"]))),128))],512)])}const ps=e=>(Object(d["M"])("data-v-2a7f69fa"),e=e(),Object(d["K"])(),e),gs={class:"epc-widget-item-name"},Os={key:0},js=ps(()=>Object(d["n"])("div",{class:"epc-widget-btn epc-widget-btn-delete"}," 删除 ",-1)),fs=ps(()=>Object(d["n"])("div",{class:"epc-widget-btn epc-widget-btn-move"}," 移动 ",-1)),ys={key:1,class:"ep-widget-description"},vs={key:1,class:"ep-widget-description"},ws=["onClick"],Ss=Object(d["o"])("添加"),ks=["label","prop"],$s={key:0,class:"epc-widget-item-label"},Es={key:1,class:"epc-widget-description"},_s=Object(d["o"])("添加"),As=["label"],Rs=Object(d["o"])("添加"),Ds=["label","prop"],Ts={key:0},Cs={key:1,class:"epc-widget-description"},Js=["onClick"],Ps=Object(d["o"])("添加");function Ws(e,t,s,n,i,c){const o=Object(d["S"])("ep-widget-item"),r=Object(d["S"])("vue-drag"),a=Object(d["S"])("Col"),l=Object(d["S"])("Row"),h=Object(d["S"])("AButton");return Object(d["J"])(),Object(d["m"])("div",{class:Object(d["z"])(["epc-widget-item",e.cls]),onClick:t[4]||(t[4]=t=>e.onOriginViewSelect(t,e.schema))},[Object(d["n"])("div",gs,Object(d["W"])(e.schema.name),1),"design"===e.tab?(Object(d["J"])(),Object(d["m"])("div",Os,[js,Object(d["n"])("div",{class:"epc-widget-btn epc-widget-btn-clone",onClick:t[0]||(t[0]=t=>e.onCopyWidget(t,e.schema))}," 复制 "),fs])):Object(d["l"])("",!0),e.schema.container?(Object(d["J"])(),Object(d["m"])(d["b"],{key:1},[e.schema.dynamic&&"design"!==e.tab?Object(d["l"])("",!0):(Object(d["J"])(),Object(d["m"])(d["b"],{key:0},[e.schema.option?(Object(d["J"])(),Object(d["k"])(l,{key:0,type:"flex",gutter:e.schema.option.gutter,align:e.schema.option.align,justify:e.schema.option.justify},{default:Object(d["eb"])(()=>[(Object(d["J"])(!0),Object(d["m"])(d["b"],null,Object(d["Q"])(e.schema.children,(t,s)=>(Object(d["J"])(),Object(d["k"])(a,{key:s,span:t.span,offset:t.offset},{default:Object(d["eb"])(()=>[Array.isArray(t.list)?(Object(d["J"])(),Object(d["m"])(d["b"],{key:0},["design"!==e.tab?(Object(d["J"])(!0),Object(d["m"])(d["b"],{key:0},Object(d["Q"])(t.list,t=>Object(d["fb"])((Object(d["J"])(),Object(d["k"])(o,{key:t.key,schema:t,"flat-widgets":e.flatWidgets,"flat-schemas":e.flatSchemas,"root-schema":e.rootSchema,onOnAdd:e.onViewAdd,onOnEvent:e.onEvent,onOnDynamicAdd:e.onDynamicAdd,onOnDynamicRemove:e.onDynamicRemove},null,8,["schema","flat-widgets","flat-schemas","root-schema","onOnAdd","onOnEvent","onOnDynamicAdd","onOnDynamicRemove"])),[[d["bb"],!t.hidden]])),128)):(Object(d["J"])(),Object(d["k"])(r,Object(d["x"])({key:1,handle:".ep-widget-item-handle",draggable:".ep-widget-item","ghost-class":"ep-widget-ghost"},{group:{name:"g1"}},{list:t.list,animation:200}),{default:Object(d["eb"])(()=>[Object(d["p"])(d["f"],{mode:"fade"},{default:Object(d["eb"])(()=>[0===t.list.length?(Object(d["J"])(),Object(d["m"])("div",{class:Object(d["z"])(["ep-widget-item",e.getPlaceholderCls()]),key:"placeholder"},null,2)):(Object(d["J"])(!0),Object(d["m"])(d["b"],{key:1},Object(d["Q"])(t.list,t=>(Object(d["J"])(),Object(d["k"])(o,{key:t.key,schema:t,"flat-widgets":e.flatWidgets,"flat-schemas":e.flatSchemas,"selected-schema":e.selectedSchema,"root-schema":e.rootSchema,class:Object(d["z"])({"ep-widget-selected":t.key===e.selectedSchema.key}),onOnSelect:e.onViewSelect,onOnDelete:e.onViewDelete,onOnCopy:e.onViewCopy,onOnAdd:e.onViewAdd,onOnEvent:e.onEvent},null,8,["schema","flat-widgets","flat-schemas","selected-schema","root-schema","class","onOnSelect","onOnDelete","onOnCopy","onOnAdd","onOnEvent"]))),128))]),_:2},1024)]),_:2},1040,["list"]))],64)):Object(d["l"])("",!0)]),_:2},1032,["span","offset"]))),128))]),_:1},8,["gutter","align","justify"])):Object(d["l"])("",!0),e.schema.description?(Object(d["J"])(),Object(d["m"])("div",ys,Object(d["W"])(e.schema.description),1)):(Object(d["J"])(!0),Object(d["m"])(d["b"],{key:2},Object(d["Q"])(e.schema.list,(t,s)=>(Object(d["J"])(),Object(d["m"])("div",{style:{position:"relative"},key:s},[t.option?(Object(d["J"])(),Object(d["k"])(l,{key:0,type:"flex",gutter:t.option.gutter,align:t.option.align,justify:t.option.justify,class:Object(d["z"])("design"!==e.tab?"ep-widget-dynamic-container":"")},{default:Object(d["eb"])(()=>[(Object(d["J"])(!0),Object(d["m"])(d["b"],null,Object(d["Q"])(t.children,(t,s)=>(Object(d["J"])(),Object(d["k"])(a,{key:s,span:t.span,offset:t.offset},{default:Object(d["eb"])(()=>[Array.isArray(t.list)&&"design"!==e.tab?(Object(d["J"])(!0),Object(d["m"])(d["b"],{key:0},Object(d["Q"])(t.list,t=>(Object(d["J"])(),Object(d["k"])(o,{key:t.key,schema:t,"flat-widgets":e.flatWidgets,"flat-schemas":e.flatSchemas,"root-schema":e.rootSchema,onOnAdd:e.onViewAdd,onOnEvent:e.onEvent,onOnDynamicAdd:e.onDynamicAdd,onOnDynamicRemove:e.onDynamicRemove},null,8,["schema","flat-widgets","flat-schemas","root-schema","onOnAdd","onOnEvent","onOnDynamicAdd","onOnDynamicRemove"]))),128)):Object(d["l"])("",!0)]),_:2},1032,["span","offset"]))),128))]),_:2},1032,["gutter","align","justify","class"])):Object(d["l"])("",!0),t.description?(Object(d["J"])(),Object(d["m"])("div",vs,Object(d["W"])(t.description),1)):Object(d["l"])("",!0),Object(d["n"])("div",{class:"epiv-widget-dynamic-remove ep-icon ep-icon-minus",title:"删除",onClick:t=>e.onOriginDynamicRemove(t,e.schema,s)},null,8,ws)]))),128)),Object(d["fb"])(Object(d["p"])(h,{type:"dashed",style:{"margin-top":"5px"},size:e.schema.size||e.rootSchema.size,onClick:t[1]||(t[1]=t=>e.onOriginDynamicAdd(t,e.schema))},{default:Object(d["eb"])(()=>[Ss]),_:1},8,["size"]),[[d["bb"],e.schema.dynamic]])],64))],64)):(Object(d["J"])(),Object(d["m"])(d["b"],{key:2},[e.schema.dynamic&&"design"!==e.tab?(Object(d["J"])(),Object(d["m"])(d["b"],{key:1},[0===e.schema.list.length?(Object(d["J"])(),Object(d["m"])("div",{key:0,class:Object(d["z"])({"epc-widget-item-full":!e.schema.label}),label:e.schema.label},[Object(d["p"])(h,{style:{"margin-top":"5px"},size:e.schema.size||e.rootSchema.size,type:"dashed",onClick:t[2]||(t[2]=t=>e.onOriginDynamicAdd(t,e.schema))},{default:Object(d["eb"])(()=>[Rs]),_:1},8,["size"])],10,As)):Object(d["l"])("",!0),(Object(d["J"])(!0),Object(d["m"])(d["b"],null,Object(d["Q"])(e.schema.list,(t,s)=>(Object(d["J"])(),Object(d["m"])("div",{key:t.key,class:Object(d["z"])({"epc-widget-item-full":!t.label}),label:0===s?e.schema.label:void 0,prop:t.key},[t.help?(Object(d["J"])(),Object(d["m"])("span",Ts,Object(d["W"])(t.label),1)):Object(d["l"])("",!0),(Object(d["J"])(),Object(d["k"])(Object(d["U"])(e.flatWidgets[t.widget].View),{class:"epc-widget-instance",schema:e.schema.list[s],onOnEvent:e.onEvent},null,40,["schema","onOnEvent"])),t.description?(Object(d["J"])(),Object(d["m"])("div",Cs,Object(d["W"])(t.description),1)):Object(d["l"])("",!0),Object(d["n"])("div",{class:"epc-view-widget-remove",title:"删除",onClick:t=>e.onOriginDynamicRemove(t,e.schema,s)},null,8,Js)],10,Ds))),128)),0!==e.schema.list.length?(Object(d["J"])(),Object(d["m"])("div",{key:1,class:Object(d["z"])({"epc-widget-item-full":!e.schema.label}),label:" "},[Object(d["p"])(h,{type:"dashed",style:{"margin-top":"5px"},size:e.schema.size||e.rootSchema.size,onClick:t[3]||(t[3]=t=>e.onOriginDynamicAdd(t,e.schema))},{default:Object(d["eb"])(()=>[Ps]),_:1},8,["size"])],2)):Object(d["l"])("",!0)],64)):(Object(d["J"])(),Object(d["m"])("div",{key:0,class:Object(d["z"])(["epc-widget-item-default",{"ep-widget-item-full":!e.schema.label}]),label:e.schema.label,prop:e.schema.key},[e.schema.label?(Object(d["J"])(),Object(d["m"])("span",$s,Object(d["W"])(e.schema.label),1)):Object(d["l"])("",!0),(Object(d["J"])(),Object(d["k"])(Object(d["U"])(e.flatWidgets[e.schema.widget].View),{class:"ep-widget-instance",schema:e.schema,onOnEvent:e.onEvent},null,40,["schema","onOnEvent"])),e.schema.description?(Object(d["J"])(),Object(d["m"])("div",Es,Object(d["W"])(e.schema.description),1)):Object(d["l"])("",!0),e.schema.dynamic?(Object(d["J"])(),Object(d["k"])(h,{key:2,style:{"margin-top":"5px"},size:e.schema.size||e.rootSchema.size,type:"dashed"},{default:Object(d["eb"])(()=>[_s]),_:1},8,["size"])):Object(d["l"])("",!0)],10,ks))],64))],2)}var Is=s("a7bb"),xs=s("1dd1");const Ls={ref:"vuedrag"};function Us(e,t,s,n,i,c){return Object(d["J"])(),Object(d["m"])("div",Ls,[Object(d["R"])(e.$slots,"default")],512)}var Vs=s("85b3"),Ms=Object(d["r"])({mounted(){const{handle:e,draggable:t,ghostClass:s}=this.$attrs;new Vs["a"](this.$refs.vuedrag,{handle:e,draggable:t,ghostClass:s,sort:!0,animation:150,easing:"cubic-bezier(1, 0, 0, 1)",group:{name:"g1"}})}});const Gs=b()(Ms,[["render",Us]]);var Ns=Gs,zs=Object(d["r"])({name:"EpWidgetItem",components:{vueDrag:Ns,AButton:Object(d["w"])(Dt["a"]),Col:Is["a"],Row:xs["a"]},props:{schema:{type:Object,default:()=>({})},selectedSchema:{type:Object,default:()=>({key:""})},flatWidgets:{type:Object,default:()=>({})}},data(){return{markRaw:d["w"],value:"",testList:[{id:1,label:"11111"},{id:2,label:"22222"}]}},computed:{store(){return this.$root.$options.extension.store},cls(){return{"epc-widget-selected":this.schema.key===this.selectedSchema.key,"epc-widget-container":this.schema.container}},tab(){return this.store.getTab()}},created(){},methods:{getPlaceholderCls(){const e=!Object.keys(this.$slots).length&&"design"===this.tab;return e?"ep-widget-grid-placeholder":""},onEvent(e,t,...s){this.$emit("on-event",...arguments)},onOriginViewSelect(e,t){this.$emit("on-select",t)},onCopyWidget(e,t){e.stopPropagation(),this.$emit("on-copy",t)},onDynamicAdd(){}}});s("3afb");const Ks=b()(zs,[["render",Ws],["__scopeId","data-v-2a7f69fa"]]);var Hs=Ks,Bs=Object(d["r"])({components:{EpcWidgetItem:Hs},data(){return{}},computed:{childrenSchema(){const{store:e}=this.$root.$options.extension;return n.getRootSchemaChildren(e.getRootSchema())||[]},store(){return this.$root.$options.extension.store},$$store(){return this.$root.$options.extension.store.$$store},state(){return this.$$store.state},flatWidgets(){return this.store.getFlatWidgets()},selectedSchema(){return this.store.getSelectedSchema()},rootSchema(){return this.store.getRootSchema()},flatSchemas(){return this.store.getFlatSchemas()}},mounted(){const{mode:e}=this.$root.$options.extension;new Vs["a"](this.$refs.vuedrag,{handle:".epc-widget-btn-move",draggable:".epc-widget-item",ghostClass:"epc-widget-ghost",sort:!0,animation:150,easing:"cubic-bezier(1, 0, 0, 1)"})},methods:{onWidgetSelect(e){const{tab:t,selectedSchema:s}=this.store.getState();"design"===t&&s&&s.key!==e.key&&(this.store.selectWidget(e.key),this.$emit("on-select",e))},onWidgetDelete(e){this.store.removeWidget(e.key),this.$emit("on-delete",e)},onWidgetCopy(e){this.store.copyWidget(e.key),this.$emit("on-copy",e)},onWidgetAdd(e){this.store.addWidgetChild(e.key,e.children.length,e.children[0]),this.$emit("on-add",e)},onEvent(){},onDynamicAdd(){},onDynamicRemove(){}}});const Fs=b()(Bs,[["render",ms]]);var Qs=Fs;function Ys(e,t,s,n,i,c){const o=Object(d["S"])("Input");return e.schema.key?(Object(d["J"])(),Object(d["k"])(o,{key:0,value:e.model[e.schema.key],"onUpdate:value":t[0]||(t[0]=t=>e.model[e.schema.key]=t),placeholder:e.schema.placeholder,onInput:e.show},null,8,["value","placeholder","onInput"])):Object(d["l"])("",!0)}var qs=Object(d["r"])({extends:hs,components:{Input:Object(d["w"])(Xe["a"])},methods:{show(){}}});const Zs=b()(qs,[["render",Ys]]);var Xs=Zs;function en(e,t,s,n,i,c){const o=Object(d["S"])("SettingForm");return Object(d["J"])(),Object(d["k"])(o,{store:e.store,"key-list":e.keyList},null,8,["store","key-list"])}var tn=Object(d["r"])({extends:ls,components:{SettingForm:Object(d["w"])(as)},data(){return{keyList:["key","placeholder","label"]}}});const sn=b()(tn,[["render",en]]);var nn=sn,cn=o.base.input;const on={View:Object(d["w"])(Xs),Setting:nn,Schema:cn};var rn=on;function an(e,t,s,n,i,c){const o=Object(d["S"])("a-radio");return Object(d["J"])(),Object(d["k"])(o,{value:e.model[e.schema.key],"onUpdate:value":t[0]||(t[0]=t=>e.model[e.schema.key]=t)},null,8,["value"])}var ln=s("71f1"),dn=Object(d["r"])({extends:hs,components:{ARadio:Object(d["w"])(ln["a"])},mounted(){this.model=11111}});const hn=b()(dn,[["render",an]]);var un=hn;function bn(e,t,s,n,i,c){const o=Object(d["S"])("SettingForm");return Object(d["J"])(),Object(d["k"])(o,{store:e.store,"key-list":e.keyList},null,8,["store","key-list"])}var mn=Object(d["r"])({extends:ls,components:{SettingForm:Object(d["w"])(as)},data(){return{keyList:["key","label"]}}});const pn=b()(mn,[["render",bn]]);var gn=pn,On=o.base.radio;const jn={View:Object(d["w"])(un),Setting:gn,Schema:On};var fn=jn;var yn=[{title:"表单",key:"form",widgets:[rn,fn]}],vn=s("4098"),wn={env:"production",widgets:yn,Render:a.VueRender,component:Qs,schema:vn,panels:{footer:{},tool:{},header:{center:{},right:{style:""}}},view:"pc",pc:{component:Qs,widgets:yn,Render:a.VueRender}},Sn=Object(d["r"])({name:"Home",components:{},data(){return{epage:{}}},mounted(){const e=this.$refs.lowcode_edit,t={...wn,el:e};this.epage=new Zt(t),window.ee=this.epage}});s("606b");const kn=b()(Sn,[["render",f],["__scopeId","data-v-69e7938c"]]);var $n=kn,En=[{path:"/",name:"Home",component:$n}],_n=Object(O["a"])({history:Object(O["b"])(window.__MICRO_APP_BASE_ROUTE__||"/child/easePageCreator/"),routes:En}),An=_n,Rn=Object(le["a"])({state:{},mutations:{},actions:{},modules:{}});s("ade1");Object(d["j"])(g).use(Rn).use(An).mount("#app")},d751:function(e,t,s){},ea15:function(e,t,s){},f7bb:function(e,t,s){}});